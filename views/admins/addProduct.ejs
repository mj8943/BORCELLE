<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product</title>

  <link rel="stylesheet" href="/admin_asset/assets/css/styles.min.css">
</head>
<style>
  .sizes {
    width: 150px;
    height: 30px;
    border: 0;
    padding: 7px;
  }

  .lb {
    font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
    color: rgb(112, 7, 7);
  }

  .box {
    width: 98%;
    height: 40px;
    padding-left: 30px;
    border-radius: 10px;
    border: 0;
    color: rgb(112, 7, 7);
  }

  .image-container {
    position: relative;
    display: inline-block;
    width: 100px;
    /* Adjust as needed */
    height: 100px;
    /* Adjust as needed */
  }

  .product-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 5%;
  }

  .remove-button {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    transform: translate(-50%, -50%);
    background-color: red;
    color: white;
    padding: 5px 10px;
    border: none;
    cursor: pointer;
    display: none;
  }

  .image-container:hover .remove-button {
    display: inline-block;
  }

  #custom-button {
    background-color: rgb(112, 7, 7);
    color: white;
    padding: 10px 15px;
    cursor: pointer;
    border: none;
    margin-top: 10px;
  }

  #imageInput {
    display: none;
  }

  .preview-image-container {
    position: relative;
    margin-right: 10px;
    width: 100px;
    height: 150px;
  }

  .product-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 5%;
  }

  .preview-image-container:hover .remove-button-new {
    display: inline-block;
  }

  .remove-button-new {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgb(112, 7, 7);
    color: white;
    padding: 5px 10px;
    border: none;
    cursor: pointer;
    ;
  }

  #preview-images {
    padding-bottom: 20px;
  }
</style>

<body>
  <!--  Body Wrapper -->
  <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
    data-sidebar-position="fixed" data-header-position="fixed">
    <!-- Sidebar Start -->
    <aside class="left-sidebar">
      <!-- Sidebar scroll-->
      <div>
        <div class="brand-logo d-flex align-items-center justify-content-between">
          <a href="./index.html" class="text-nowrap logo-img">
            <img src="/Borcelle white.png" width="155" alt="" style="margin-left: 20px; margin-top: 10px;" />
          </a>
          <div class="close-btn d-xl-none d-block sidebartoggler cursor-pointer" id="sidebarCollapse">
            <i class="ti ti-x fs-8"></i>
          </div>
        </div>
        <!-- Sidebar navigation-->
        <nav class="sidebar-nav scroll-sidebar" data-simplebar="">
          <ul id="sidebarnav">
            <li class="nav-small-cap">
              <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="/admin/dashboard" aria-expanded="false">
                <span>
                  <i class="ti ti-layout-dashboard"></i>
                </span>
                <span class="hide-menu">Dashboard</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="/admin/users-list" aria-expanded="false">
                <span>
                  <i class="ti ti-article"></i>
                </span>
                <span class="hide-menu">Customers</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="/admin/products" aria-expanded="false"
                style="background-color: rgb(112, 7, 7); color: #fff;">
                <span>
                  <i class="ti ti-shopping-cart"></i>
                </span>
                <span class="hide-menu">Products</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="/admin/categories" aria-expanded="false">
                <span>
                  <i class="ti ti-cards"></i>
                </span>
                <span class="hide-menu">Categories</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="/admin/orders" aria-expanded="false">
                <span>
                  <i class="ti ti-file-description"></i>
                </span>
                <span class="hide-menu">Orders</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="/admin/product-coupon" aria-expanded="false">
                <span>
                  <i class="ti ti-tag"></i>
                </span>
                <span class="hide-menu">Coupons</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="/admin/product-offer" aria-expanded="false">
                <span>
                  <i class="ti ti-discount"></i>
                </span>
                <span class="hide-menu">Offer</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="/admin/banners" aria-expanded="false" style="color: black;">
                <span>
                  <i class="ti ti-aperture"></i>
                </span>
                <span class="hide-menu">Banner</span>
              </a>
            </li>
            <li class="sidebar-item" style="margin-top: 30px; width: 180px; margin-left: 17px;">
              <a class="sidebar-link" href="/admin/logout" aria-expanded="false"
                style="background-color: rgb(112, 7, 7); padding-left: 59px;">
                <span class="hide-menu" style="color: aliceblue;">Logout</span>
              </a>
            </li>
        </nav>
        <!-- End Sidebar navigation -->
      </div>
      <!-- End Sidebar scroll-->
    </aside>
    <!--  Sidebar End -->
    <!--  Main wrapper -->
    <div class="body-wrapper">
      <div
        style="background-color: rgb(112, 7, 7); color: #fff; width: 95%; text-align: center;
      margin-left: 20px; height: 50px; font-size: xx-large; font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;">
        ADD PRODUCT
      </div>
      <div
        style="background-color: rgba(197, 127, 127, 0.414); width: 95%; height: auto; margin-left: 20px; margin-top: 15px; border-radius: 7px; padding: 30px;">
        <form action="/admin/add_product" method="post" enctype="multipart/form-data">
          <input type="text" name="name" placeholder="Enter product name" required class="box">


          <div class="col-6 pe-2">
            <br>

            <select name="category" id="topLevelCategory" class="form-select mb-3" style="border-color: #fff;">
              <option selected disabled value="0">
                Select Category
              </option>
              <% category.forEach(category=> { %>
                <option value="<%= category.name %>">
                  <%= category.name%>
                </option>
                <% }) %>
            </select>
            <div id="parentCateErrorMessage" class="text-danger mt-2"></div>
          </div>
          <input type="text" name="price" placeholder="Enter product price" required class="box">
          <br>
          <br>
          <div id="imageErrorMessage" class="text-danger"></div>
          <label for="imageInput" class="btn btn-outline-primary" id="custom-button">Add Image</label>
          <input type="file" name="productImages" id="imageInput" multiple accept="image/*" />

          <div style="display: flex; margin-left: 350px;" id="preview-images">

          </div>
          <input type="text" name="description" placeholder="Enter product description" required class="box">

          <br>
          <div style="width: 98%; background-color: #fff; margin-top: 30px;">
            <h4
              style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; color: rgb(112, 7, 7); padding-left: 420px;">
              Product Size with Quantity</h4>
          </div>
          <br>
          <div style="margin-left: 310px;">
            <label for="xs" class="lb">XS &nbsp;</label>
            <input type="number" name="xs" value="0" class="sizes">

            <label for="s" class="lb" style="margin-left: 100px;">S &nbsp;</label>
            <input type="number" name="s" value="0" class="sizes">
            <br>
            <br>
            <label for="m" class="lb">M &nbsp;</label>
            <input type="number" name="m" value="0" class="sizes">

            <label for="l" class="lb" style="margin-left: 105px;">L &nbsp;</label>
            <input type="number" name="l" value="0" class="sizes">
            <br>
            <br>
            <label for="xl" class="lb">XL &nbsp;</label>
            <input type="number" name="xl" value="0" class="sizes">

            <label for="xxl" class="lb" style="margin-left: 85px;">XXL &nbsp; </label>
            <input type="number" name="xxl" value="0" class="sizes">
            <br>
            <br>
          </div>
          <br>
          <div style="margin-left: 450px;">
            <a href="/admin/products"> <button type="button" class="btn"
                style="border:rgb(112, 7, 7)solid; color: black; font-weight: 600;">Close</button></a>
            <button type="submit" class="btn"
              style="background-color: rgb(112, 7, 7); color: #fff; font-weight: 600; border:rgb(112, 7, 7)solid; margin-left: 10px;"
              onclick="submitForm()">Add</button>
          </div>
        </form>
      </div>

    </div>
    <script src="/admin_asset/assets/libs/jquery/dist/jquery.min.js"></script>
    <script src="/admin_asset/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/admin_asset/assets/js/sidebarmenu.js"></script>
    <script src="/admin_asset/assets/js/app.min.js"></script>
    <script src="/admin_asset/assets/libs/simplebar/dist/simplebar.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
      // Function to handle file selection
      function handleFileSelect(event) {
        const files = event.target.files;
        const maxFileSize = 5 * 1024 * 1024; // 5MB
        const allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];

        for (const file of files) {
          // Check file type
          if (!allowedTypes.includes(file.type)) {
            Swal.fire({
              icon: "error",
              title: "Oops...",
              text: "Only JPEG, PNG, and GIF images are allowed."
            });
            event.target.value = '';
            return;
          }

          // Check file size
          if (file.size > maxFileSize) {
            Swal.fire({
              icon: "error",
              title: "Oops...",
              text: "File size exceeds the maximum limit of 5MB."
            });
            event.target.value = '';
            return;
          }

          // If the file type and size are valid, continue with file preview
          previewFile(file);
        }
      }

      // Function to preview the selected file
      function previewFile(file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          // Create a preview container for the image
          const previewImagesContainer = document.getElementById("preview-images");
          const imageContainer = document.createElement("div");
          imageContainer.classList.add("preview-image-container");

          // Create an image element
          const image = new Image();
          image.src = e.target.result;
          image.classList.add("preview-image");
          image.classList.add("product-image");

          // Add the image to the container
          imageContainer.appendChild(image);

          // Append the container to the preview container
          previewImagesContainer.appendChild(imageContainer);
        };

        // Read the file as data URL
        reader.readAsDataURL(file);
      }

      // Attach the handleFileSelect function to the change event of the file input
      document.getElementById("imageInput").addEventListener("change", handleFileSelect);
    </script>



</body>

</html>